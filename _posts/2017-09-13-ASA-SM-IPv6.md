---
layout: post
title: Cisco ASA-SM context mode and IPv6
tags: Cisco ASA-SM IPv6
comments: true
---



Small victory on Cisco ASA-SM in context mode and IPv6.

I have tried to run IPv6 on Cisco ASA-SM in context mode, but failed for quite a long time. IPv6 was down even everything seemed to be configured correctly.

```
> show ipv6 interface Vlan31
Vlan31 is up, line protocol is up
  IPv6 is stalled, link-local address is fe80::a0bc:f3ff:fe00:de [DUPLICATE] 
  Global unicast address(es):
    2001:db8:801:600::11, subnet is 2001:db8:801:600::10/126 [TENTATIVE] 
```


Problem was caused by DUPLICATE link-local address. It seems that Cisco ASA-SM shares MAC address of interface on multiple contexts, that means, that there is a IPv6 address collision (because link-local address is created using MAC address) and IPv6 is malfuncioning. Setting IPv6 link-local address manually to ex. `fe80::10` made IPv6 work on this link between ASA-SM and Cisco Catalyst 6800 switch/router like a charm.

```
> show ipv6 int Vlan31
Vlan31 is up, line protocol is up
  IPv6 is enabled, link-local address is fe80::10  
  Global unicast address(es):
    2001:db8:801:600::11, subnet is 2001:db8:801:600::10/126
```

{% if page.comments %} 

<div id="disqus_thread"></div>
<script>

var disqus_config = function () {
this.page.url = "http://www.rohleder.cz/";
this.page.identifier = "ASA-SM-IPv6" ; //
};
*/
(function() { // DON'T EDIT BELOW THIS LINE
var d = document, s = d.createElement('script');
s.src = 'https://EXAMPLE.disqus.com/embed.js';
s.setAttribute('data-timestamp', +new Date());
(d.head || d.body).appendChild(s);
})();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                            
{% endif %}
